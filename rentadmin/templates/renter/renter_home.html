{% extends 'renter/renter_layout.html' %}
{% block content %}
{% load static %}
<div class="container mt-3">
    {% for m in messages %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>{{ m }}</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}

    {% if info.status == 'Pending' %}
    <div class="row">
        <div class="col-lg-12">
            <div class="card btn-custom-2">
                <div class="card-body text-center">
                    <h5 class="card-title">Please Fill The Following Information To Complete The Process </h5>
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="card btn-custom-3">
                <div class="card-body">
                    {% if info.state == None %}
                    <form method="post" action="{% url 'savepersonalinfo' %}">
                        {% csrf_token %}
                        <div class="row" id="personalinfo">
                            <div class="col-lg-3">
                                <label>State</label>
                                <input type="text" name="state" id="state" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>City</label>
                                <input type="text" name="city" id="city" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>ZIP</label>
                                <input type="text" name="zip" id="zip" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>Experience(In Years)</label>
                                <input type="text" name="experience" id="experience" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>Skype</label>
                                <input type="text" name="skype" class="form-control">
                            </div>
                            <div class="col-lg-3">
                                <label>WhatsApp</label>
                                <input type="text" name="whatsapp" class="form-control">
                            </div>
                            <div class="col-lg-3">
                                <label>Contact No</label>
                                <input type="text" name="contact" id="contact" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>Mobile Carrier</label>
                                <select class="custom-select" name="carrier" id="carrier" required>
                                    <option selected disabled value="">---Chose One---</option>
                                    <option value="txt.att.net">AT&T</option>
                                    <option value="tmomail.net">T-Mobile</option>
                                    <option value="vtext.com">Verizon</option>
                                    <option value="messaging.sprintpcs.com">Sprint</option>
                                    <option value="vtext.com">Xfinity Mobile</option>
                                    <option value="vmobl.com">Virgin Mobile</option>
                                    <option value="mmst5.tracfone.com">Tracfone</option>
                                    <option value="smtext.com">Simple Mobile</option>
                                    <option value="mailmymobile.net">Mint Mobile</option>
                                    <option value="vtext.com">Red Pocket</option>
                                    <option value="mymetropcs.com">Metro PCS</option>
                                    <option value="sms.myboostmobile.com">Boost Mobile</option>
                                    <option value="sms.cricketwireless.net">Cricket</option>
                                    <option value="text.republicwireless.com">Republic Wireless</option>
                                    <option value="msg.fi.google.com">Google Fi</option>
                                    <option value="email.uscc.net">U.S Cellular</option>
                                    <option value="message.ting.com">Ting</option>
                                    <option value="mailmymobile.net">Consumer Cellular</option>
                                    <option value="cspire1.com">C-Spire</option>
                                    <option value="vtext.com">Page Plus</option>
                                </select>
                            </div>
                            <div class="col-lg-12 mt-3">
                                <button type="submit" class="btn btn-warning btn-lg btn-block" id="btnNext">Next >></button>
                            </div>
                        </div>
                    </form>
                    {% endif %}

                    {% if info.driving_license == 'N/A' and info.state != None %}
                    <form method="post" action="{% url 'savedriverinfo' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row" id="drivinginfo">
                            <div class="col-lg-3">
                                <label>Driving License No.<span class="redfont"> *</span></label>
                                <input type="text" name="license_no" class="form-control" required>
                            </div>
                            <div class="col-lg-3">
                                <label>Driving License Image<span class="redfont"> *</span></label>
                                <input type="file" capture accept="image/*" name="license_image" class="form-control" required>
                            </div>
                            <div class="col-lg-4">
                                <label>Do You Want To Get Chauffeur Request ?<span class="redfont"> *</span></label>
                                <select class="custom-select" name="chauffeur" required>
                                    <option value="" disabled selected>--Select An Option--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="hrborder"></div>
                            </div>
                            <div class="col-lg-3">
    			                <label>How Long You Have Had A Valid Driver License(In Years) ? <span class="redfont"> *</span></label>
    			                <input type="number" class="form-control" name="licenseinyears" required="required">
    		                </div>
                            <div class="col-lg-3">
    			                <label>Can You Provide 5 Years of Driving History?<span class="redfont"> *</span></label>
                                <select class="custom-select" name="drivinghistory" required="required">
                                    <option disabled selected value="">--Select An Option--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
    		                </div>
                            <div class="col-lg-3">
    			                <label>Do You Currently Have A Job?<br><span class="redfont"> *</span></label>
                                <select class="custom-select" name="currentjob" required="required">
                                    <option disabled selected>--Select An Option--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
    		                </div>
    		                <div class="col-lg-3">
    			                <label>Did You Work in Any Car Service As A Driver Before?<span class="redfont"> *</span></label>
                                    <select class="custom-select" name="workedincar" required="required">
                                        <option disabled selected value="">--Select An Option--</option>
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                    </select>
    		                </div>
                            <div class="col-lg-3 mt-3">
                                <label>Have You Ever Been in A Car Accident?<span class="redfont"> *</span></label>
                                <select class="custom-select" name="caraccident" id="caraccident" required="required">
                                    <option disabled selected value="">--Select An Option--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                            <div class="col-lg-4 mt-3">
                                <label>If We Decide To Move Forward, What Kind of Car Would You Prefer?<span class="redfont"> *</span></label>
                                <select class="custom-select" name="carprefer" required="required">
                                    <option disabled selected value="">--Select An Option--</option>
                                    <option value="SUV">SUV</option>
                                    <option value="SEDAN">SEDAN</option>
                                </select>
                            </div>
                            <div class="col-lg-5 mt-3">
                                <label>What, in your opinion, is the most important quality in a driver?<span class="redfont"> *</span></label>
                                <input type="text" name="qualityodriver" class="form-control" required="required">
                            </div>
                            <div class="col-lg-12 mt-3">
                               <button type="button" data-toggle="modal" data-target="#SubmitModal" onclick="checkaccident()" class="btn btn-lg btn-warning btn-block">Finish</button>
                            </div>
                        </div>

                    <div class="modal fade" id="SubmitModal" tabindex="-1" role="dialog" aria-labelledby="SubmitModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header" style="color:black">Finish Input & Submit</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row" id="insurance" style="display: none">
                                        <div class="col-lg-12">
                                            <label style="color:black">Insurance No.<span class="redfont"> *</span></label>
                                            <input type="text" name="insurance_no" id="insurance_no" class="form-control" >
                                        </div>
                                        <div class="col-lg-12">
                                            <label style="color:black">Insurance Image<span class="redfont"> *</span></label>
                                            <input type="file" capture accept="image/*" name=insurance_image" id=insurance_image" class="form-control" >
                                        </div>
                                        <h3 id="sure"></h3>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="row">
        <div class="col-lg-2 mt-3">
            <div class="card text-center bg-secondary text-white">
                <div class="card-header">Total Points</div>
                <div class="card-body">
                    <h5 class="card-title">{{ info.points }}</h5>
                </div>
            </div>
        </div>
        <div class="col-lg-2 mt-3">
            <div class="card text-center bg-primary text-white">
                <div class="card-header">Due Payment</div>
                <div class="card-body">
                    <h5 class="card-title">$0</h5>
                </div>
            </div>
        </div>
        <div class="col-lg-2 mt-3">
            <div class="card text-center bg-success text-white">
                <div class="card-header">Total Earning</div>
                <div class="card-body">
                    <h5 class="card-title">${{ info.balance }}</h5>
                </div>
            </div>
        </div>
        <div class="col-lg-3 mt-3">
            <div class="card text-center bg-info text-white">
                <div class="card-header">Assigned Car</div>
                <div class="card-body">
                    {% if info.assigned_car == None %}
                    <h5 class="card-title">{{ info.assigned_car }}</h5>
                    <button type="button" class="btn btn-custom-3" data-toggle="modal" data-target="#AddCarModal">Add Own Car</button>
                    {% else %}
                    <h5 class="card-title"><a style="color: white" target="_blank" href="{% url 'rentercardetails' info.assigned_car.carid %}">{{ info.assigned_car }}</a></h5>
                    {% endif %}
                </div>
            </div>
        </div>
        {% if active_ride  %}
        <div class="col-lg-3 mt-3">
            <div class="card text-center bg-dark text-white">
                <div class="card-header">Active Request</div>
                <div class="card-body">
                    <h5 class="card-title">{{ active_ride.cid }}</h5>
                </div>
                <a href="{% url 'completeride' active_ride.requestid %}" class="btn btn-success mb-2 ml-2 mr-2">Complete Ride</a>
            </div>
        </div>
        {% else %}
        <div class="col-lg-3 mt-3">
            <div class="card text-center bg-success text-white">
                <div class="card-header">Chauffeur Request</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-4"><h3 class="card-title">{{ ride_count }}</h3></div>
                        <div class="col-lg-8"><a href="{% url 'riderequests' %}" class="btn btn-danger btn-block">View Requests</a></div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    <div class="jumbotron mt-2">
        <div class="row">
            <div class="col-lg-3">
                <a href="{% url 'gigboard' %}" class="btn btn-lg btn-block btn-custom-1">View Bidding Board</a>
            </div>
            <div class="col-lg-3">
                <a href="{% url 'rideshared' %}" class="btn btn-lg btn-block btn-custom-4">
                    Shared Rides
                    {% if shared > 0 %}
                    <span class="badge badge-danger">{{ shared }}</span>
                    {% endif %}
                </a>
            </div>
            {% if active_gig %}
            <div class="col-lg-3">
                <a href="{% url 'runninggig' %}" class="btn btn-lg btn-block btn-custom-4">Running Gigs <span class="badge badge-light">1</span></a>
            </div>
            {% endif %}
        </div>
        <hr class="hrborder">
        <div class="row">
            <div class="col-lg-3">
                <a href="{% url 'networkhome' %}" target="_blank" class="btn btn-lg btn-block btn-custom-2">Network Management</a>
            </div>
            <div class="col-lg-3">
                <button class="btn btn-lg btn-block btn-primary" data-toggle="modal" data-target="#SendInviteModal">Send Invites</button>
            </div>
        </div>
    </div>
    {% endif %}
</div>


<div class="modal fade" id="SendInviteModal" tabindex="-1" role="dialog" aria-labelledby="SendInviteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="SendInviteModalLabel">Send Invites</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <button class="btn btn-lg btn-custom-4 btn-block" data-dismiss="modal" data-toggle="modal" data-target="#InviteCustomerModal">Input Clients</button>
                <button class="btn btn-lg btn-info btn-block" data-dismiss="modal" data-toggle="modal" data-target="#InviteDriverModal">Add Drivers in Network</button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="InviteDriverModal" tabindex="-1" role="dialog" aria-labelledby="InviteDriverModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="post" action="{% url 'invitedriver' %}">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="InviteDriverModalLabel">Send Invites</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Email For Invite</label>
                        <input class="form-control" type="email" name="email">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Send Invite</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="InviteCustomerModal" tabindex="-1" role="dialog" aria-labelledby="InviteCustomerModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="post" action="{% url 'invitecustomer' %}">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="InviteCustomerModalLabel">Send Invites</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Email For Invite</label>
                        <input class="form-control" type="email" name="email">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Send Invite</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="AddCarModal" tabindex="-1" role="dialog" aria-labelledby="AddCarModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 900px">
        <div class="modal-content">
            <form method="post" action="{% url 'addowncar' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="AddCarModalLabel">Add Car</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Car Image <span style="color: red">*</span></label>
                                <input required class="form-control" type="file" name="carimage">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>VIN No <span style="color: red">*</span></label>
                                <input required class="form-control" type="text" name="vinno" placeholder="Enter VIN No">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Category <span style="color: red">*</span></label>
                                <select class="custom-select" required name="category">
                                    <option value="" selected>--Select One Option--</option>
                                    <option value="SUV">SUV</option>
                                    <option value="SEDAN">SEDAN</option>
                                    <option value="SPORTS CAR">SPORTS CAR</option>
                                    <option value="STATION WAGON">STATION WAGON</option>
                                    <option value="HATCHBACK">HATCHBACK</option>
                                    <option value="CONVERTIBLE">CONVERTIBLE</option>
                                    <option value="MINIVAN">MINIVAN</option>
                                    <option value="PICKUP TRUCK">PICKUP TRUCK</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Make <span style="color: red">*</span></label>
                                <input required class="form-control" type="text" name="make" placeholder="Enter Car Maker">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Model <span style="color: red">*</span></label>
                                <input required class="form-control" type="text" name="model" placeholder="Enter Car Model">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Mfg. Year <span style="color: red">*</span></label>
                                <input required class="form-control" type="text" name="mfgyear" placeholder="Enter Car Mfg. Year">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label>Car Insurance <span style="color: red">*</span></label>
                                <input required class="form-control" type="file" name="insuarance_image">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add Car</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>



{% if info.assigned_car == None and info.status != 'Pending' %}

<div class="modal fade" id="AdModal" tabindex="-1" role="dialog" aria-labelledby="AdModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 900px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AdModalLabel">Make An Car Interest</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                  {% for car in cars %}
                  <div class="col-lg-4">
                      <div class="card">
                          <img class="card-img-top" src="{% static 'images/cars/none.jpg' %}" alt="Card image cap">
                          <div class="card-body">
                            <h5 class="card-title">{{ car.make }} {{ car.model }} {{ car.mfg_year }}</h5>
                            <p class="card-text">VIN No: {{ car.vin }}</p>
                            <button type="button" data-dismiss="modal" data-toggle="modal" data-target="#OptionModal{{ car.carid }}" class="btn btn-success">Interest</button>
                            <a href="{% url 'rentercardetails' car.carid %}" target="_blank" class="btn btn-primary">View Details</a>
                          </div>
                      </div>
                  </div>
                  {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% for car in cars %}
<div class="modal fade" id="OptionModal{{ car.carid }}" tabindex="-1" role="dialog" aria-labelledby="OptionModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="OptionModalLabel">Select An Option</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <a href="{% url 'generalinterest' car.carid %}" class="btn btn-lg btn-block btn-custom-3">General Interest</a>
                </div>
                <div class="form-group">
                    <button class="btn btn-lg btn-block btn-custom-2" data-dismiss="modal" data-toggle="modal" data-target="#PaymentModal{{ car.carid }}">Deposit Reservation</button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="PaymentModal{{ car.carid }}" tabindex="-1" role="dialog" aria-labelledby="PaymentModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="PaymentModalLabel">Select An Option</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <button type="button" class="btn btn-lg btn-warning btn-block" ><img src="{% static 'images/paypal.png' %}" width="150px"></button>
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-lg btn-primary btn-block" data-dismiss="modal" data-toggle="modal" data-target="#CashAppModal{{ car.carid }}"><img src="{% static 'images/cash.png' %}" width="150px"></button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="CashAppModal{{ car.carid }}" tabindex="-1" role="dialog" aria-labelledby="CashAppModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form method="post" action="{% url 'carreserve' car.carid %}">
                {% csrf_token %}
            <div class="modal-header">
                <h5 class="modal-title" id="CashAppModalLabel">Select An Option</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" name="carid" value="{{ car.carid }}">
                <div class="form-group">
                    <label>Transaction ID</label>
                    <input type="text" class="form-control" name="txnid" required>
                </div>
                <div class="form-group">
                    <label>Amount</label>
                    <input type="number" step="any" class="form-control" name="amount" required>
                </div>
                <div class="form-group">
                    <label>Pay Date</label>
                    <input type="date" class="form-control" name="paydate" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Submit</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </form>
        </div>
    </div>
</div>

{% endfor %}

{% if is_interested < 1 %}
<script type="text/javascript">

    $(window).on('load',function(){
        $('#AdModal').modal('show');
    });

</script>
{% endif %}

{% endif %}

{% endblock %}


